{"version":3,"sources":["StatusBar.js"],"names":["throttle","require","classNames","prettierBytes","prettyETA","h","statusBarStates","calculateProcessingProgress","files","progresses","Object","keys","forEach","fileID","progress","preprocess","push","postprocess","mode","message","value","filter","isDeterminate","reduce","total","index","all","length","togglePauseResume","props","isAllComplete","resumableUploads","uppy","cancelAll","isAllPaused","resumeAll","pauseAll","module","exports","newFiles","allowNewUpload","isUploadInProgress","error","hideUploadButton","hidePauseResumeButton","hideCancelButton","hideRetryButton","recoveredState","uploadState","progressValue","totalProgress","progressMode","progressBarContent","STATE_PREPROCESSING","STATE_POSTPROCESSING","ProgressBarProcessing","STATE_COMPLETE","ProgressBarComplete","STATE_UPLOADING","supportsUploadProgress","ProgressBarUploading","STATE_ERROR","undefined","ProgressBarError","width","isHidden","STATE_WAITING","hideAfterFinish","showUploadBtn","showCancelBtn","showPauseResumeBtn","showRetryBtn","showDoneBtn","doneButtonHandler","progressClassNames","statusBarClassNames","isTargetDOMEl","isSomeGhost","UploadBtn","uploadBtnClassNames","uploadBtnText","isUploadStarted","i18n","smart_count","startUpload","RetryBtn","retryAll","CancelBtn","PauseResumeButton","title","DoneBtn","LoadingSpinner","Math","round","renderDot","ProgressDetails","ifShowFilesUploadedOfTotal","numUploads","complete","totalUploadedSize","totalSize","time","totalETA","UnknownProgressDetails","UploadNewlyAddedFiles","ThrottledProgressDetails","leading","trailing","showUploadNewlyAddedFiles","showProgressDetails","displayErrorAlert","errorMessage","alert"],"mappings":"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","sourcesContent":["const throttle = require('lodash.throttle')\nconst classNames = require('classnames')\nconst prettierBytes = require('@transloadit/prettier-bytes')\nconst prettyETA = require('@uppy/utils/lib/prettyETA')\nconst { h } = require('preact')\nconst statusBarStates = require('./StatusBarStates')\n\nfunction calculateProcessingProgress (files) {\n  // Collect pre or postprocessing progress states.\n  const progresses = []\n  Object.keys(files).forEach((fileID) => {\n    const { progress } = files[fileID]\n    if (progress.preprocess) {\n      progresses.push(progress.preprocess)\n    }\n    if (progress.postprocess) {\n      progresses.push(progress.postprocess)\n    }\n  })\n\n  // In the future we should probably do this differently. For now we'll take the\n  // mode and message from the first fileâ€¦\n  const { mode, message } = progresses[0]\n  const value = progresses.filter(isDeterminate).reduce((total, progress, index, all) => {\n    return total + progress.value / all.length\n  }, 0)\n  function isDeterminate (progress) {\n    return progress.mode === 'determinate'\n  }\n\n  return {\n    mode,\n    message,\n    value,\n  }\n}\n\nfunction togglePauseResume (props) {\n  if (props.isAllComplete) return\n\n  if (!props.resumableUploads) {\n    return props.uppy.cancelAll()\n  }\n\n  if (props.isAllPaused) {\n    return props.uppy.resumeAll()\n  }\n\n  return props.uppy.pauseAll()\n}\n\nmodule.exports = (props) => {\n  props = props || {}\n\n  const {\n    newFiles,\n    allowNewUpload,\n    isUploadInProgress,\n    isAllPaused,\n    resumableUploads,\n    error,\n    hideUploadButton,\n    hidePauseResumeButton,\n    hideCancelButton,\n    hideRetryButton,\n    recoveredState,\n  } = props\n\n  const { uploadState } = props\n\n  let progressValue = props.totalProgress\n  let progressMode\n  let progressBarContent\n\n  if (uploadState === statusBarStates.STATE_PREPROCESSING || uploadState === statusBarStates.STATE_POSTPROCESSING) {\n    const progress = calculateProcessingProgress(props.files)\n    progressMode = progress.mode\n    if (progressMode === 'determinate') {\n      progressValue = progress.value * 100\n    }\n\n    progressBarContent = ProgressBarProcessing(progress)\n  } else if (uploadState === statusBarStates.STATE_COMPLETE) {\n    progressBarContent = ProgressBarComplete(props)\n  } else if (uploadState === statusBarStates.STATE_UPLOADING) {\n    if (!props.supportsUploadProgress) {\n      progressMode = 'indeterminate'\n      progressValue = null\n    }\n\n    progressBarContent = ProgressBarUploading(props)\n  } else if (uploadState === statusBarStates.STATE_ERROR) {\n    progressValue = undefined\n    progressBarContent = ProgressBarError(props)\n  }\n\n  const width = typeof progressValue === 'number' ? progressValue : 100\n  let isHidden = (uploadState === statusBarStates.STATE_WAITING && props.hideUploadButton)\n    || (uploadState === statusBarStates.STATE_WAITING && !props.newFiles > 0)\n    || (uploadState === statusBarStates.STATE_COMPLETE && props.hideAfterFinish)\n\n  let showUploadBtn = !error && newFiles\n    && !isUploadInProgress && !isAllPaused\n    && allowNewUpload && !hideUploadButton\n\n  if (recoveredState) {\n    isHidden = false\n    showUploadBtn = true\n  }\n\n  const showCancelBtn = !hideCancelButton\n    && uploadState !== statusBarStates.STATE_WAITING\n    && uploadState !== statusBarStates.STATE_COMPLETE\n  const showPauseResumeBtn = resumableUploads && !hidePauseResumeButton\n    && uploadState === statusBarStates.STATE_UPLOADING\n\n  const showRetryBtn = error && !hideRetryButton\n\n  const showDoneBtn = props.doneButtonHandler && uploadState === statusBarStates.STATE_COMPLETE\n\n  const progressClassNames = `uppy-StatusBar-progress\n                           ${progressMode ? `is-${progressMode}` : ''}`\n\n  const statusBarClassNames = classNames(\n    { 'uppy-Root': props.isTargetDOMEl },\n    'uppy-StatusBar',\n    `is-${uploadState}`,\n    { 'has-ghosts': props.isSomeGhost }\n  )\n\n  return (\n    <div className={statusBarClassNames} aria-hidden={isHidden}>\n      <div\n        className={progressClassNames}\n        style={{ width: `${width}%` }}\n        role=\"progressbar\"\n        aria-label={`${width}%`}\n        aria-valuetext={`${width}%`}\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        aria-valuenow={progressValue}\n      />\n      {progressBarContent}\n      <div className=\"uppy-StatusBar-actions\">\n        {showUploadBtn ? <UploadBtn {...props} uploadState={uploadState} /> : null}\n        {showRetryBtn ? <RetryBtn {...props} /> : null}\n        {showPauseResumeBtn ? <PauseResumeButton {...props} /> : null}\n        {showCancelBtn ? <CancelBtn {...props} /> : null}\n        {showDoneBtn ? <DoneBtn {...props} /> : null}\n      </div>\n    </div>\n  )\n}\n\nconst UploadBtn = (props) => {\n  const uploadBtnClassNames = classNames(\n    'uppy-u-reset',\n    'uppy-c-btn',\n    'uppy-StatusBar-actionBtn',\n    'uppy-StatusBar-actionBtn--upload',\n    { 'uppy-c-btn-primary': props.uploadState === statusBarStates.STATE_WAITING },\n    { 'uppy-StatusBar-actionBtn--disabled': props.isSomeGhost }\n  )\n\n  const uploadBtnText = props.newFiles && props.isUploadStarted && !props.recoveredState\n    ? props.i18n('uploadXNewFiles', { smart_count: props.newFiles })\n    : props.i18n('uploadXFiles', { smart_count: props.newFiles })\n\n  return (\n    <button\n      type=\"button\"\n      className={uploadBtnClassNames}\n      aria-label={props.i18n('uploadXFiles', { smart_count: props.newFiles })}\n      onClick={props.startUpload}\n      disabled={props.isSomeGhost}\n      data-uppy-super-focusable\n    >\n      {uploadBtnText}\n    </button>\n  )\n}\n\nconst RetryBtn = (props) => {\n  return (\n    <button\n      type=\"button\"\n      className=\"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry\"\n      aria-label={props.i18n('retryUpload')}\n      onClick={() => props.uppy.retryAll()}\n      data-uppy-super-focusable\n    >\n      <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"8\" height=\"10\" viewBox=\"0 0 8 10\">\n        <path d=\"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z\" />\n      </svg>\n      {props.i18n('retry')}\n    </button>\n  )\n}\n\nconst CancelBtn = (props) => {\n  return (\n    <button\n      type=\"button\"\n      className=\"uppy-u-reset uppy-StatusBar-actionCircleBtn\"\n      title={props.i18n('cancel')}\n      aria-label={props.i18n('cancel')}\n      onClick={() => props.uppy.cancelAll()}\n      data-uppy-super-focusable\n    >\n      <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <circle fill=\"#888\" cx=\"8\" cy=\"8\" r=\"8\" />\n          <path fill=\"#FFF\" d=\"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z\" />\n        </g>\n      </svg>\n    </button>\n  )\n}\n\nconst PauseResumeButton = (props) => {\n  const { isAllPaused, i18n } = props\n  const title = isAllPaused ? i18n('resume') : i18n('pause')\n\n  return (\n    <button\n      title={title}\n      aria-label={title}\n      className=\"uppy-u-reset uppy-StatusBar-actionCircleBtn\"\n      type=\"button\"\n      onClick={() => togglePauseResume(props)}\n      data-uppy-super-focusable\n    >\n      {isAllPaused ? (\n        <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n          <g fill=\"none\" fillRule=\"evenodd\">\n            <circle fill=\"#888\" cx=\"8\" cy=\"8\" r=\"8\" />\n            <path fill=\"#FFF\" d=\"M6 4.25L11.5 8 6 11.75z\" />\n          </g>\n        </svg>\n      ) : (\n        <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n          <g fill=\"none\" fillRule=\"evenodd\">\n            <circle fill=\"#888\" cx=\"8\" cy=\"8\" r=\"8\" />\n            <path d=\"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z\" fill=\"#FFF\" />\n          </g>\n        </svg>\n      )}\n    </button>\n  )\n}\n\nconst DoneBtn = (props) => {\n  const { i18n } = props\n  return (\n    <button\n      type=\"button\"\n      className=\"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done\"\n      onClick={props.doneButtonHandler}\n      data-uppy-super-focusable\n    >\n      {i18n('done')}\n    </button>\n  )\n}\n\nconst LoadingSpinner = () => {\n  return (\n    <svg className=\"uppy-StatusBar-spinner\" aria-hidden=\"true\" focusable=\"false\" width=\"14\" height=\"14\">\n      <path d=\"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0\" fillRule=\"evenodd\" />\n    </svg>\n  )\n}\n\nconst ProgressBarProcessing = (props) => {\n  const value = Math.round(props.value * 100)\n\n  return (\n    <div className=\"uppy-StatusBar-content\">\n      <LoadingSpinner />\n      {props.mode === 'determinate' ? `${value}% \\u00B7 ` : ''}\n      {props.message}\n    </div>\n  )\n}\n\nconst renderDot = () => ' \\u00B7 '\n\nconst ProgressDetails = (props) => {\n  const ifShowFilesUploadedOfTotal = props.numUploads > 1\n\n  return (\n    <div className=\"uppy-StatusBar-statusSecondary\">\n      {\n        ifShowFilesUploadedOfTotal\n        && props.i18n('filesUploadedOfTotal', {\n          complete: props.complete,\n          smart_count: props.numUploads,\n        })\n      }\n      <span className=\"uppy-StatusBar-additionalInfo\">\n        {/* When should we render this dot?\n          1. .-additionalInfo is shown (happens only on desktops)\n          2. AND 'filesUploadedOfTotal' was shown\n        */}\n        {ifShowFilesUploadedOfTotal && renderDot()}\n\n        {\n          props.i18n('dataUploadedOfTotal', {\n            complete: prettierBytes(props.totalUploadedSize),\n            total: prettierBytes(props.totalSize),\n          })\n        }\n\n        {renderDot()}\n\n        {\n          props.i18n('xTimeLeft', {\n            time: prettyETA(props.totalETA),\n          })\n        }\n      </span>\n    </div>\n  )\n}\n\nconst UnknownProgressDetails = (props) => {\n  return (\n    <div className=\"uppy-StatusBar-statusSecondary\">\n      {props.i18n('filesUploadedOfTotal', { complete: props.complete, smart_count: props.numUploads })}\n    </div>\n  )\n}\n\nconst UploadNewlyAddedFiles = (props) => {\n  const uploadBtnClassNames = classNames(\n    'uppy-u-reset',\n    'uppy-c-btn',\n    'uppy-StatusBar-actionBtn',\n    'uppy-StatusBar-actionBtn--uploadNewlyAdded'\n  )\n\n  return (\n    <div className=\"uppy-StatusBar-statusSecondary\">\n      <div className=\"uppy-StatusBar-statusSecondaryHint\">\n        {props.i18n('xMoreFilesAdded', { smart_count: props.newFiles })}\n      </div>\n      <button\n        type=\"button\"\n        className={uploadBtnClassNames}\n        aria-label={props.i18n('uploadXFiles', { smart_count: props.newFiles })}\n        onClick={props.startUpload}\n      >\n        {props.i18n('upload')}\n      </button>\n    </div>\n  )\n}\n\nconst ThrottledProgressDetails = throttle(ProgressDetails, 500, { leading: true, trailing: true })\n\nconst ProgressBarUploading = (props) => {\n  if (!props.isUploadStarted || props.isAllComplete) {\n    return null\n  }\n\n  const title = props.isAllPaused ? props.i18n('paused') : props.i18n('uploading')\n  const showUploadNewlyAddedFiles = props.newFiles && props.isUploadStarted\n\n  return (\n    <div className=\"uppy-StatusBar-content\" aria-label={title} title={title}>\n      {!props.isAllPaused ? <LoadingSpinner /> : null}\n      <div className=\"uppy-StatusBar-status\">\n        <div className=\"uppy-StatusBar-statusPrimary\">\n          {props.supportsUploadProgress ? `${title}: ${props.totalProgress}%` : title}\n        </div>\n        {/* eslint-disable-next-line no-nested-ternary */}\n        {!props.isAllPaused && !showUploadNewlyAddedFiles && props.showProgressDetails\n          ? (props.supportsUploadProgress ? <ThrottledProgressDetails {...props} /> : <UnknownProgressDetails {...props} />)\n          : null}\n        {showUploadNewlyAddedFiles ? <UploadNewlyAddedFiles {...props} /> : null}\n      </div>\n    </div>\n  )\n}\n\nconst ProgressBarComplete = ({ i18n }) => {\n  return (\n    <div className=\"uppy-StatusBar-content\" role=\"status\" title={i18n('complete')}>\n      <div className=\"uppy-StatusBar-status\">\n        <div className=\"uppy-StatusBar-statusPrimary\">\n          <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-StatusBar-statusIndicator uppy-c-icon\" width=\"15\" height=\"11\" viewBox=\"0 0 15 11\">\n            <path d=\"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z\" />\n          </svg>\n          {i18n('complete')}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ProgressBarError = ({ error, i18n }) => {\n  function displayErrorAlert () {\n    const errorMessage = `${i18n('uploadFailed')} \\n\\n ${error}`\n    // eslint-disable-next-line no-alert\n    alert(errorMessage) // TODO: move to custom alert implementation\n  }\n\n  return (\n    <div className=\"uppy-StatusBar-content\" role=\"alert\" title={i18n('uploadFailed')}>\n      <div className=\"uppy-StatusBar-status\">\n        <div className=\"uppy-StatusBar-statusPrimary\">\n          <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-StatusBar-statusIndicator uppy-c-icon\" width=\"11\" height=\"11\" viewBox=\"0 0 11 11\">\n            <path d=\"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z\" />\n          </svg>\n          {i18n('uploadFailed')}\n        </div>\n      </div>\n      <button\n        className=\"uppy-StatusBar-details\"\n        aria-label={error}\n        data-microtip-position=\"top-right\"\n        data-microtip-size=\"medium\"\n        onClick={displayErrorAlert}\n        type=\"button\"\n      >\n        ?\n      </button>\n    </div>\n  )\n}\n"]}