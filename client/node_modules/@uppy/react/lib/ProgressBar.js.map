{"version":3,"sources":["ProgressBar.js"],"names":["React","require","PropTypes","ProgressBarPlugin","uppyPropType","uppy","getHTMLProps","h","createElement","ProgressBar","Component","constructor","props","validProps","componentDidMount","installPlugin","componentDidUpdate","prevProps","uninstallPlugin","componentWillUnmount","options","id","target","container","use","plugin","getPlugin","removePlugin","render","ref","propTypes","fixed","bool","hideAfterFinish","defaultProps","module","exports"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAzB;;AACA,MAAME,iBAAiB,GAAGF,OAAO,CAAC,oBAAD,CAAjC;;AACA,MAAMG,YAAY,GAAGH,OAAO,CAAC,aAAD,CAAP,CAAuBI,IAA5C;;AACA,MAAMC,YAAY,GAAGL,OAAO,CAAC,gBAAD,CAA5B;;AAEA,MAAMM,CAAC,GAAGP,KAAK,CAACQ,aAAhB;AAEA;AACA;AACA;;AAEA,MAAMC,WAAN,SAA0BT,KAAK,CAACU,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,UAAMA,KAAN;AACA,SAAKC,UAAL,GAAkBP,YAAY,CAACM,KAAD,CAA9B;AACD;;AAEDE,EAAAA,iBAAiB,GAAI;AACnB,SAAKC,aAAL;AACD;;AAEDC,EAAAA,kBAAkB,CAAEC,SAAF,EAAa;AAC7B,QAAIA,SAAS,CAACZ,IAAV,KAAmB,KAAKO,KAAL,CAAWP,IAAlC,EAAwC;AACtC,WAAKa,eAAL,CAAqBD,SAArB;AACA,WAAKF,aAAL;AACD;AACF;;AAEDI,EAAAA,oBAAoB,GAAI;AACtB,SAAKD,eAAL;AACD;;AAEDH,EAAAA,aAAa,GAAI;AACf,UAAM;AAAEV,MAAAA;AAAF,QAAW,KAAKO,KAAtB;AACA,UAAMQ,OAAO,GAAG;AACdC,MAAAA,EAAE,EAAE,mBADU;AAEd,SAAG,KAAKT,KAFM;AAGdU,MAAAA,MAAM,EAAE,KAAKC;AAHC,KAAhB;AAKA,WAAOH,OAAO,CAACf,IAAf;AAEAA,IAAAA,IAAI,CAACmB,GAAL,CAASrB,iBAAT,EAA4BiB,OAA5B;AAEA,SAAKK,MAAL,GAAcpB,IAAI,CAACqB,SAAL,CAAeN,OAAO,CAACC,EAAvB,CAAd;AACD;;AAEDH,EAAAA,eAAe,CAAEN,KAAK,GAAG,KAAKA,KAAf,EAAsB;AACnC,UAAM;AAAEP,MAAAA;AAAF,QAAWO,KAAjB;AAEAP,IAAAA,IAAI,CAACsB,YAAL,CAAkB,KAAKF,MAAvB;AACD;;AAEDG,EAAAA,MAAM,GAAI;AACR,WAAOrB,CAAC,CAAC,KAAD,EAAQ;AACdsB,MAAAA,GAAG,EAAGN,SAAD,IAAe;AAClB,aAAKA,SAAL,GAAiBA,SAAjB;AACD,OAHa;AAId,SAAG,KAAKV;AAJM,KAAR,CAAR;AAMD;;AAhDuC;;AAmD1CJ,WAAW,CAACqB,SAAZ,GAAwB;AACtBzB,EAAAA,IAAI,EAAED,YADgB;AAEtB2B,EAAAA,KAAK,EAAE7B,SAAS,CAAC8B,IAFK;AAGtBC,EAAAA,eAAe,EAAE/B,SAAS,CAAC8B;AAHL,CAAxB;AAKAvB,WAAW,CAACyB,YAAZ,GAA2B,EAA3B;AAGAC,MAAM,CAACC,OAAP,GAAiB3B,WAAjB","sourcesContent":["const React = require('react')\nconst PropTypes = require('prop-types')\nconst ProgressBarPlugin = require('@uppy/progress-bar')\nconst uppyPropType = require('./propTypes').uppy\nconst getHTMLProps = require('./getHTMLProps')\n\nconst h = React.createElement\n\n/**\n * React component that renders a progress bar at the top of the page.\n */\n\nclass ProgressBar extends React.Component {\n  constructor (props) {\n    super(props)\n    this.validProps = getHTMLProps(props)\n  }\n\n  componentDidMount () {\n    this.installPlugin()\n  }\n\n  componentDidUpdate (prevProps) {\n    if (prevProps.uppy !== this.props.uppy) {\n      this.uninstallPlugin(prevProps)\n      this.installPlugin()\n    }\n  }\n\n  componentWillUnmount () {\n    this.uninstallPlugin()\n  }\n\n  installPlugin () {\n    const { uppy } = this.props\n    const options = {\n      id: 'react:ProgressBar',\n      ...this.props,\n      target: this.container,\n    }\n    delete options.uppy\n\n    uppy.use(ProgressBarPlugin, options)\n\n    this.plugin = uppy.getPlugin(options.id)\n  }\n\n  uninstallPlugin (props = this.props) {\n    const { uppy } = props\n\n    uppy.removePlugin(this.plugin)\n  }\n\n  render () {\n    return h('div', {\n      ref: (container) => {\n        this.container = container\n      },\n      ...this.validProps,\n    })\n  }\n}\n\nProgressBar.propTypes = {\n  uppy: uppyPropType,\n  fixed: PropTypes.bool,\n  hideAfterFinish: PropTypes.bool,\n}\nProgressBar.defaultProps = {\n}\n\nmodule.exports = ProgressBar\n"]}