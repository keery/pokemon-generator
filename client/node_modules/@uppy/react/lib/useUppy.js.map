{"version":3,"sources":["useUppy.js"],"names":["useEffect","useRef","require","UppyCore","Uppy","module","exports","useUppy","factory","TypeError","uppy","undefined","current","close"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA,SAAF;AAAaC,EAAAA;AAAb,IAAwBC,OAAO,CAAC,OAAD,CAArC;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,YAAD,CAAP,CAAsBE,IAAvC;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,OAAT,CAAkBC,OAAlB,EAA2B;AAC1C,MAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;AACjC,UAAM,IAAIC,SAAJ,CAAc,+DAAd,CAAN;AACD;;AAED,QAAMC,IAAI,GAAGT,MAAM,CAACU,SAAD,CAAnB;;AACA,MAAID,IAAI,CAACE,OAAL,KAAiBD,SAArB,EAAgC;AAC9BD,IAAAA,IAAI,CAACE,OAAL,GAAeJ,OAAO,EAAtB;;AAEA,QAAI,EAAEE,IAAI,CAACE,OAAL,YAAwBT,QAA1B,CAAJ,EAAyC;AACvC,YAAM,IAAIM,SAAJ,CAAe,+DAA8D,OAAOC,IAAI,CAACE,OAAQ,EAAjG,CAAN;AACD;AACF;;AAEDZ,EAAAA,SAAS,CAAC,MAAM;AACd,WAAO,MAAM;AACXU,MAAAA,IAAI,CAACE,OAAL,CAAaC,KAAb;AACD,KAFD;AAGD,GAJQ,EAIN,EAJM,CAAT;AAMA,SAAOH,IAAI,CAACE,OAAZ;AACD,CArBD","sourcesContent":["const { useEffect, useRef } = require('react')\nconst UppyCore = require('@uppy/core').Uppy\n\nmodule.exports = function useUppy (factory) {\n  if (typeof factory !== 'function') {\n    throw new TypeError('useUppy: expected a function that returns a new Uppy instance')\n  }\n\n  const uppy = useRef(undefined)\n  if (uppy.current === undefined) {\n    uppy.current = factory()\n\n    if (!(uppy.current instanceof UppyCore)) {\n      throw new TypeError(`useUppy: factory function must return an Uppy instance, got ${typeof uppy.current}`)\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      uppy.current.close()\n    }\n  }, [])\n\n  return uppy.current\n}\n"]}