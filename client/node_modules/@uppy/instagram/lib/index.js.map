{"version":3,"sources":["index.js"],"names":["UIPlugin","require","Provider","ProviderViews","h","module","exports","Instagram","constructor","uppy","opts","id","initPlugin","icon","defaultLocale","strings","pluginNameInstagram","i18nInit","title","i18n","provider","companionUrl","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","onFirstRender","bind","render","install","view","viewType","showTitles","showFilter","showBreadcrumbs","target","mount","uninstall","tearDown","unmount","Promise","all","fetchPreAuthToken","getFolder","state","VERSION"],"mappings":"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","sourcesContent":["const { UIPlugin } = require('@uppy/core')\nconst { Provider } = require('@uppy/companion-client')\nconst { ProviderViews } = require('@uppy/provider-views')\nconst { h } = require('preact')\n\nmodule.exports = class Instagram extends UIPlugin {\n  static VERSION = require('../package.json').version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'Instagram'\n    Provider.initPlugin(this, opts)\n    this.icon = () => (\n      <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <rect className=\"uppy-ProviderIconBg\" fill=\"#E1306C\" width=\"32\" height=\"32\" rx=\"16\" />\n          <path d=\"M16 8.622c2.403 0 2.688.009 3.637.052.877.04 1.354.187 1.67.31.392.144.745.374 1.036.673.299.29.529.644.673 1.035.123.317.27.794.31 1.671.043.95.052 1.234.052 3.637s-.009 2.688-.052 3.637c-.04.877-.187 1.354-.31 1.671a2.98 2.98 0 0 1-1.708 1.708c-.317.123-.794.27-1.671.31-.95.043-1.234.053-3.637.053s-2.688-.01-3.637-.053c-.877-.04-1.354-.187-1.671-.31a2.788 2.788 0 0 1-1.035-.673 2.788 2.788 0 0 1-.673-1.035c-.123-.317-.27-.794-.31-1.671-.043-.949-.052-1.234-.052-3.637s.009-2.688.052-3.637c.04-.877.187-1.354.31-1.67.144-.392.374-.745.673-1.036.29-.299.644-.529 1.035-.673.317-.123.794-.27 1.671-.31.95-.043 1.234-.052 3.637-.052zM16 7c-2.444 0-2.75.01-3.71.054-.959.044-1.613.196-2.185.419-.6.225-1.145.58-1.594 1.038-.458.45-.813.993-1.039 1.594-.222.572-.374 1.226-.418 2.184C7.01 13.25 7 13.556 7 16s.01 2.75.054 3.71c.044.959.196 1.613.419 2.185.226.6.58 1.145 1.038 1.594.45.458.993.813 1.594 1.038.572.223 1.227.375 2.184.419.96.044 1.267.054 3.711.054s2.75-.01 3.71-.054c.959-.044 1.613-.196 2.185-.419a4.602 4.602 0 0 0 2.632-2.632c.223-.572.375-1.226.419-2.184.044-.96.054-1.267.054-3.711s-.01-2.75-.054-3.71c-.044-.959-.196-1.613-.419-2.185A4.412 4.412 0 0 0 23.49 8.51a4.412 4.412 0 0 0-1.594-1.039c-.572-.222-1.226-.374-2.184-.418C18.75 7.01 18.444 7 16 7zm0 4.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9zm0 7.421a2.921 2.921 0 1 1 0-5.842 2.921 2.921 0 0 1 0 5.842zm4.875-6.671a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25z\" fill=\"#FFF\" />\n        </g>\n      </svg>\n    )\n\n    this.defaultLocale = {\n      strings: {\n        pluginNameInstagram: 'Instagram',\n      },\n    }\n    this.i18nInit()\n    this.title = this.i18n('pluginNameInstagram')\n\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'instagram',\n      pluginId: this.id,\n    })\n\n    this.onFirstRender = this.onFirstRender.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  install () {\n    this.view = new ProviderViews(this, {\n      provider: this.provider,\n      viewType: 'grid',\n      showTitles: false,\n      showFilter: false,\n      showBreadcrumbs: false,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall () {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  onFirstRender () {\n    return Promise.all([\n      this.provider.fetchPreAuthToken(),\n      this.view.getFolder('recent'),\n    ])\n  }\n\n  render (state) {\n    return this.view.render(state)\n  }\n}\n"]}