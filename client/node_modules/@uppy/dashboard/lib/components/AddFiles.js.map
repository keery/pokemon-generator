{"version":3,"sources":["AddFiles.js"],"names":["h","Component","require","Symbol","for","AddFiles","triggerFileInputClick","fileInput","click","triggerFolderInputClick","folderInput","onFileInputChange","event","props","handleInputChange","target","value","renderHiddenInput","isFolder","refCallback","maxNumberOfFiles","allowedFileTypes","renderMyDeviceAcquirer","i18n","renderBrowseButton","text","onClickFn","numberOfAcquirers","acquirers","length","renderDropPasteBrowseTagline","browseFiles","browseFolders","lowerFMSelectionType","fileManagerSelectionType","camelFMSelectionType","charAt","toUpperCase","slice","disableLocalFiles","i18nArray","browse","renderAcquirer","acquirer","id","activePickerPanel","showPanel","icon","name","renderAcquirers","acquirersWithoutLastTwo","lastTwoAcquirers","splice","map","renderPoweredByUppy","uppyBranding","linkText","uppy","render","ref","note","proudlyDisplayPoweredByUppy","module","exports"],"mappings":"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","sourcesContent":["const { h, Component } = require('preact')\n\nclass AddFiles extends Component {\n  triggerFileInputClick = () => {\n    this.fileInput.click()\n  }\n\n  triggerFolderInputClick = () => {\n    this.folderInput.click()\n  }\n\n  onFileInputChange = (event) => {\n    this.props.handleInputChange(event)\n\n    // We clear the input after a file is selected, because otherwise\n    // change event is not fired in Chrome and Safari when a file\n    // with the same name is selected.\n    // ___Why not use value=\"\" on <input/> instead?\n    //    Because if we use that method of clearing the input,\n    //    Chrome will not trigger change if we drop the same file twice (Issue #768).\n    event.target.value = null\n  }\n\n  renderHiddenInput = (isFolder, refCallback) => {\n    return (\n      <input\n        className=\"uppy-Dashboard-input\"\n        hidden\n        aria-hidden=\"true\"\n        tabIndex={-1}\n        webkitdirectory={isFolder}\n        type=\"file\"\n        name=\"files[]\"\n        multiple={this.props.maxNumberOfFiles !== 1}\n        onChange={this.onFileInputChange}\n        accept={this.props.allowedFileTypes}\n        ref={refCallback}\n      />\n    )\n  }\n\n  renderMyDeviceAcquirer = () => {\n    return (\n      <div\n        className=\"uppy-DashboardTab\"\n        role=\"presentation\"\n        data-uppy-acquirer-id=\"MyDevice\"\n      >\n        <button\n          type=\"button\"\n          className=\"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\"\n          role=\"tab\"\n          tabIndex={0}\n          data-uppy-super-focusable\n          onClick={this.triggerFileInputClick}\n        >\n          <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n              <rect className=\"uppy-ProviderIconBg\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#2275D7\" />\n              <path d=\"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z\" fill=\"#FFF\" />\n            </g>\n          </svg>\n          <div className=\"uppy-DashboardTab-name\">{this.props.i18n('myDevice')}</div>\n        </button>\n      </div>\n    )\n  }\n\n  renderBrowseButton = (text, onClickFn) => {\n    const numberOfAcquirers = this.props.acquirers.length\n    return (\n      <button\n        type=\"button\"\n        className=\"uppy-u-reset uppy-Dashboard-browse\"\n        onClick={onClickFn}\n        data-uppy-super-focusable={numberOfAcquirers === 0}\n      >\n        {text}\n      </button>\n    )\n  }\n\n  renderDropPasteBrowseTagline = () => {\n    const numberOfAcquirers = this.props.acquirers.length\n    const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick)\n    const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick)\n\n    // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower\n    // to Camel\n    const lowerFMSelectionType = this.props.fileManagerSelectionType\n    const camelFMSelectionType = lowerFMSelectionType.charAt(0).toUpperCase() + lowerFMSelectionType.slice(1)\n\n    return (\n      <div class=\"uppy-Dashboard-AddFiles-title\">\n        {\n          // eslint-disable-next-line no-nested-ternary\n          this.props.disableLocalFiles ? this.props.i18n('importFiles')\n            : numberOfAcquirers > 0\n              ? this.props.i18nArray(`dropPasteImport${camelFMSelectionType}`, { browseFiles, browseFolders, browse: browseFiles })\n              : this.props.i18nArray(`dropPaste${camelFMSelectionType}`, { browseFiles, browseFolders, browse: browseFiles })\n        }\n      </div>\n    )\n  }\n\n  [Symbol.for('uppy test: disable unused locale key warning')] () {\n    // Those are actually used in `renderDropPasteBrowseTagline` method.\n    this.props.i18nArray('dropPasteBoth')\n    this.props.i18nArray('dropPasteFiles')\n    this.props.i18nArray('dropPasteFolders')\n    this.props.i18nArray('dropPasteImportBoth')\n    this.props.i18nArray('dropPasteImportFiles')\n    this.props.i18nArray('dropPasteImportFolders')\n  }\n\n  renderAcquirer = (acquirer) => {\n    return (\n      <div\n        className=\"uppy-DashboardTab\"\n        role=\"presentation\"\n        data-uppy-acquirer-id={acquirer.id}\n      >\n        <button\n          type=\"button\"\n          className=\"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\"\n          role=\"tab\"\n          tabIndex={0}\n          aria-controls={`uppy-DashboardContent-panel--${acquirer.id}`}\n          aria-selected={this.props.activePickerPanel.id === acquirer.id}\n          data-uppy-super-focusable\n          onClick={() => this.props.showPanel(acquirer.id)}\n        >\n          {acquirer.icon()}\n          <div className=\"uppy-DashboardTab-name\">{acquirer.name}</div>\n        </button>\n      </div>\n    )\n  }\n\n  renderAcquirers = (acquirers, disableLocalFiles) => {\n    // Group last two buttons, so we don’t end up with\n    // just one button on a new line\n    const acquirersWithoutLastTwo = [...acquirers]\n    const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length)\n\n    return (\n      <div className=\"uppy-Dashboard-AddFiles-list\" role=\"tablist\">\n        {!disableLocalFiles && this.renderMyDeviceAcquirer()}\n        {acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer))}\n        <span role=\"presentation\" style={{ 'white-space': 'nowrap' }}>\n          {lastTwoAcquirers.map((acquirer) => this.renderAcquirer(acquirer))}\n        </span>\n      </div>\n    )\n  }\n\n  renderPoweredByUppy () {\n    const { i18nArray } = this.props\n\n    const uppyBranding = (\n      <span>\n        <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon uppy-Dashboard-poweredByIcon\" width=\"11\" height=\"11\" viewBox=\"0 0 11 11\">\n          <path d=\"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z\" fillRule=\"evenodd\" />\n        </svg>\n        <span className=\"uppy-Dashboard-poweredByUppy\">Uppy</span>\n      </span>\n    )\n\n    const linkText = i18nArray('poweredBy', { uppy: uppyBranding })\n\n    return (\n      <a\n        tabIndex=\"-1\"\n        href=\"https://uppy.io\"\n        rel=\"noreferrer noopener\"\n        target=\"_blank\"\n        className=\"uppy-Dashboard-poweredBy\"\n      >\n        {linkText}\n      </a>\n    )\n  }\n\n  render () {\n    return (\n      <div className=\"uppy-Dashboard-AddFiles\">\n        {this.renderHiddenInput(false, (ref) => { this.fileInput = ref })}\n        {this.renderHiddenInput(true, (ref) => { this.folderInput = ref })}\n        {this.renderDropPasteBrowseTagline()}\n        {this.props.acquirers.length > 0 && this.renderAcquirers(this.props.acquirers, this.props.disableLocalFiles)}\n        <div className=\"uppy-Dashboard-AddFiles-info\">\n          {this.props.note && <div className=\"uppy-Dashboard-note\">{this.props.note}</div>}\n          {this.props.proudlyDisplayPoweredByUppy && this.renderPoweredByUppy(this.props)}\n        </div>\n      </div>\n    )\n  }\n}\n\nmodule.exports = AddFiles\n"]}