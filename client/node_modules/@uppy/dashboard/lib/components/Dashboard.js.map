{"version":3,"sources":["Dashboard.js"],"names":["h","require","classNames","isDragDropSupported","FileList","AddFiles","AddFilesPanel","PickerPanelContent","EditorPanel","PanelTopBar","FileCard","Slide","WIDTH_XL","WIDTH_LG","WIDTH_MD","HEIGHT_MD","module","exports","Dashboard","props","noFiles","totalFileCount","isSizeMD","containerWidth","wrapperClassName","isTargetDOMEl","dashboardClassName","disabled","animateOpenClose","isClosing","isDraggingOver","inline","containerHeight","showAddFilesPanel","areInsidesReadyToBeVisible","itemsPerRow","showFileList","showSelectedFiles","numberOfFilesForRecovery","recoveredState","Object","keys","files","length","numberOfGhosts","filter","fileID","isGhost","renderRestoredText","i18n","smart_count","dashboard","theme","acquirers","disableLocalFiles","isHidden","handlePaste","handleDragOver","handleDragLeave","handleDrop","handleClickOutside","width","height","closeModal","fileCardFor","activePickerPanel","showFileEditor","progressindicators","map","target","uppy","getPlugin","id","render","state","direction"],"mappings":"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","sourcesContent":["const { h } = require('preact')\nconst classNames = require('classnames')\nconst isDragDropSupported = require('@uppy/utils/lib/isDragDropSupported')\nconst FileList = require('./FileList')\nconst AddFiles = require('./AddFiles')\nconst AddFilesPanel = require('./AddFilesPanel')\nconst PickerPanelContent = require('./PickerPanelContent')\nconst EditorPanel = require('./EditorPanel')\nconst PanelTopBar = require('./PickerPanelTopBar')\nconst FileCard = require('./FileCard')\nconst Slide = require('./Slide')\n\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n// https://github.com/ghosh/micromodal\n\nconst WIDTH_XL = 900\nconst WIDTH_LG = 700\nconst WIDTH_MD = 576\nconst HEIGHT_MD = 400\n\nmodule.exports = function Dashboard (props) {\n  const noFiles = props.totalFileCount === 0\n  const isSizeMD = props.containerWidth > WIDTH_MD\n\n  const wrapperClassName = classNames({\n    'uppy-Root': props.isTargetDOMEl,\n  })\n\n  const dashboardClassName = classNames({\n    'uppy-Dashboard': true,\n    'uppy-Dashboard--isDisabled': props.disabled,\n    'uppy-Dashboard--animateOpenClose': props.animateOpenClose,\n    'uppy-Dashboard--isClosing': props.isClosing,\n    'uppy-Dashboard--isDraggingOver': props.isDraggingOver,\n    'uppy-Dashboard--modal': !props.inline,\n    'uppy-size--md': props.containerWidth > WIDTH_MD,\n    'uppy-size--lg': props.containerWidth > WIDTH_LG,\n    'uppy-size--xl': props.containerWidth > WIDTH_XL,\n    'uppy-size--height-md': props.containerHeight > HEIGHT_MD,\n    'uppy-Dashboard--isAddFilesPanelVisible': props.showAddFilesPanel,\n    'uppy-Dashboard--isInnerWrapVisible': props.areInsidesReadyToBeVisible,\n  })\n\n  // Important: keep these in sync with the percent width values in `src/components/FileItem/index.scss`.\n  let itemsPerRow = 1 // mobile\n  if (props.containerWidth > WIDTH_XL) {\n    itemsPerRow = 5\n  } else if (props.containerWidth > WIDTH_LG) {\n    itemsPerRow = 4\n  } else if (props.containerWidth > WIDTH_MD) {\n    itemsPerRow = 3\n  }\n\n  const showFileList = props.showSelectedFiles && !noFiles\n\n  const numberOfFilesForRecovery = props.recoveredState ? Object.keys(props.recoveredState.files).length : null\n  const numberOfGhosts = props.files ? Object.keys(props.files).filter((fileID) => props.files[fileID].isGhost).length : null\n\n  const renderRestoredText = () => {\n    if (numberOfGhosts > 0) {\n      return props.i18n('recoveredXFiles', {\n        smart_count: numberOfGhosts,\n      })\n    }\n\n    return props.i18n('recoveredAllFiles')\n  }\n\n  const dashboard = (\n    <div\n      className={dashboardClassName}\n      data-uppy-theme={props.theme}\n      data-uppy-num-acquirers={props.acquirers.length}\n      data-uppy-drag-drop-supported={!props.disableLocalFiles && isDragDropSupported()}\n      aria-hidden={props.inline ? 'false' : props.isHidden}\n      aria-disabled={props.disabled}\n      aria-label={!props.inline ? props.i18n('dashboardWindowTitle') : props.i18n('dashboardTitle')}\n      onPaste={props.handlePaste}\n      onDragOver={props.handleDragOver}\n      onDragLeave={props.handleDragLeave}\n      onDrop={props.handleDrop}\n    >\n      <div\n        aria-hidden=\"true\"\n        className=\"uppy-Dashboard-overlay\"\n        tabIndex={-1}\n        onClick={props.handleClickOutside}\n      />\n\n      <div\n        className=\"uppy-Dashboard-inner\"\n        aria-modal={!props.inline && 'true'}\n        role={!props.inline && 'dialog'}\n        style={{\n          width: props.inline && props.width ? props.width : '',\n          height: props.inline && props.height ? props.height : '',\n        }}\n      >\n\n        {!props.inline ? (\n          <button\n            className=\"uppy-u-reset uppy-Dashboard-close\"\n            type=\"button\"\n            aria-label={props.i18n('closeModal')}\n            title={props.i18n('closeModal')}\n            onClick={props.closeModal}\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        ) : null}\n\n        <div className=\"uppy-Dashboard-innerWrap\">\n          <div className=\"uppy-Dashboard-dropFilesHereHint\">\n            {props.i18n('dropHint')}\n          </div>\n\n          {showFileList && <PanelTopBar {...props} />}\n\n          {numberOfFilesForRecovery && (\n            <div className=\"uppy-Dashboard-serviceMsg\">\n              <svg className=\"uppy-Dashboard-serviceMsg-icon\" aria-hidden=\"true\" focusable=\"false\" width=\"21\" height=\"16\" viewBox=\"0 0 24 19\">\n                <g transform=\"translate(0 -1)\" fill=\"none\" fillRule=\"evenodd\">\n                  <path d=\"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z\" fill=\"#FFD300\" />\n                  <path fill=\"#000\" d=\"M11 6h2l-.3 8h-1.4z\" />\n                  <circle fill=\"#000\" cx=\"12\" cy=\"17\" r=\"1\" />\n                </g>\n              </svg>\n              <strong className=\"uppy-Dashboard-serviceMsg-title\">\n                {props.i18n('sessionRestored')}\n              </strong>\n              <div className=\"uppy-Dashboard-serviceMsg-text\">\n                {renderRestoredText()}\n              </div>\n            </div>\n          )}\n\n          {showFileList ? (\n            <FileList\n              {...props}\n              itemsPerRow={itemsPerRow}\n            />\n          ) : (\n            <AddFiles {...props} isSizeMD={isSizeMD} />\n          )}\n\n          <Slide>\n            {props.showAddFilesPanel ? <AddFilesPanel key=\"AddFiles\" {...props} isSizeMD={isSizeMD} /> : null}\n          </Slide>\n\n          <Slide>\n            {props.fileCardFor ? <FileCard key=\"FileCard\" {...props} /> : null}\n          </Slide>\n\n          <Slide>\n            {props.activePickerPanel ? <PickerPanelContent key=\"Picker\" {...props} /> : null}\n          </Slide>\n\n          <Slide>\n            {props.showFileEditor ? <EditorPanel key=\"Editor\" {...props} /> : null}\n          </Slide>\n\n          <div className=\"uppy-Dashboard-progressindicators\">\n            {props.progressindicators.map((target) => {\n              return props.uppy.getPlugin(target.id).render(props.state)\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n\n  return (\n    // Wrap it for RTL language support\n    <div className={wrapperClassName} dir={props.direction}>\n      {dashboard}\n    </div>\n  )\n}\n"]}